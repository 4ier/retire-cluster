# Retire-Cluster

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.7+-green.svg)
![Platform](https://img.shields.io/badge/platform-Windows%20%7C%20Linux%20%7C%20macOS%20%7C%20Android-lightgrey.svg)

> è®©é—²ç½®è®¾å¤‡é‡è·æ–°ç”Ÿï¼åŸºäºTCP Socketé€šä¿¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå°†ä½ çš„æ—§æ‰‹æœºã€å¹³æ¿ã€ç¬”è®°æœ¬ç­‰é—²ç½®è®¾å¤‡ç»„ç»‡æˆä¸€ä¸ªç»Ÿä¸€çš„AIå·¥ä½œé›†ç¾¤ã€‚

[English Documentation](README.md)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Retire-Clusteræ˜¯ä¸€ä¸ªåˆ›æ–°çš„é—²ç½®è®¾å¤‡å¤ç”¨è§£å†³æ–¹æ¡ˆï¼Œä¸“ä¸ºæ‹¥æœ‰å¤šå°æ—§è®¾å¤‡çš„ç”¨æˆ·è®¾è®¡ã€‚é€šè¿‡å°†é—²ç½®çš„æ‰‹æœºã€å¹³æ¿ã€è€ç¬”è®°æœ¬ç­‰è®¾å¤‡ç»„ç»‡æˆä¸€ä¸ªç»Ÿä¸€çš„å·¥ä½œé›†ç¾¤ï¼Œè®©è¿™äº›"é€€ä¼‘"çš„è®¾å¤‡é‡æ–°å‘æŒ¥ä»·å€¼ã€‚

ç³»ç»Ÿæ”¯æŒè®¾å¤‡è‡ªåŠ¨å‘ç°ã€å®æ—¶çŠ¶æ€ç›‘æ§ã€æ™ºèƒ½ä»»åŠ¡è°ƒåº¦ï¼Œå¹¶æä¾›è‡ªç„¶è¯­è¨€æ¥å£è¿›è¡Œé›†ç¾¤ç®¡ç†ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **â™»ï¸ é—²ç½®è®¾å¤‡å¤ç”¨**: è®©æ—§æ‰‹æœºã€å¹³æ¿ã€è€ç¬”è®°æœ¬é‡æ–°å‘æŒ¥ä»·å€¼
- **ğŸ¤– æ™ºèƒ½è®¾å¤‡è°ƒåº¦**: åŸºäºè®¾å¤‡èƒ½åŠ›å’ŒçŠ¶æ€è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„æ‰§è¡ŒèŠ‚ç‚¹
- **ğŸ“Š å®æ—¶ç›‘æ§**: å¿ƒè·³æœºåˆ¶ç¡®ä¿è®¾å¤‡çŠ¶æ€å®æ—¶æ›´æ–°ï¼Œæ”¯æŒæ•…éšœè‡ªåŠ¨æ£€æµ‹
- **ğŸ”§ è‡ªåŠ¨å‘ç°**: è®¾å¤‡è‡ªæ„ŸçŸ¥ç³»ç»Ÿï¼Œè‡ªåŠ¨æ”¶é›†å’Œä¸ŠæŠ¥ç¡¬ä»¶è½¯ä»¶ä¿¡æ¯
- **ğŸ”„ åŠ¨æ€æ‰©å±•**: æ”¯æŒè®¾å¤‡çƒ­æ’æ‹”ï¼Œæ— éœ€é‡å¯æœåŠ¡å³å¯æ·»åŠ æ–°è®¾å¤‡
- **ğŸ›¡ï¸ æ•…éšœå®¹é”™**: è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œä»»åŠ¡é‡æ–°åˆ†é…æœºåˆ¶
- **ğŸŒ è·¨å¹³å°æ”¯æŒ**: æ”¯æŒWindowsã€Linuxã€macOSã€Android (Termux)

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸»èŠ‚ç‚¹            â”‚         â”‚   å·¥ä½œèŠ‚ç‚¹           â”‚
â”‚                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚è®¾å¤‡æ³¨å†Œè¡¨       â”‚ â”‚         â”‚ â”‚è®¾å¤‡åˆ†æå™¨       â”‚ â”‚
â”‚ â”‚ä»»åŠ¡è°ƒåº¦å™¨       â”‚ â”‚         â”‚ â”‚ç³»ç»Ÿç›‘æ§å™¨       â”‚ â”‚
â”‚ â”‚å¿ƒè·³ç›‘æ§å™¨       â”‚ â”‚         â”‚ â”‚ä»»åŠ¡æ‰§è¡Œå™¨       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        TCP Socket                    TCP Socket
```

### èŠ‚ç‚¹ç±»å‹

- **ä¸»èŠ‚ç‚¹ (Main Node)**: é›†ç¾¤åè°ƒå™¨å’Œç®¡ç†ä¸­å¿ƒ
- **å·¥ä½œèŠ‚ç‚¹ (Worker Node)**: ä»»åŠ¡æ‰§è¡Œå•å…ƒï¼Œæ”¯æŒå¤šç§å¹³å°
- **å­˜å‚¨èŠ‚ç‚¹ (Storage Node)**: æ•°æ®å­˜å‚¨å’Œæ–‡ä»¶æœåŠ¡ï¼ˆè®¡åˆ’ä¸­ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Python 3.7+
- ç½‘ç»œè¿é€šæ€§ï¼ˆæ‰€æœ‰è®¾å¤‡éœ€åœ¨åŒä¸€ç½‘ç»œï¼‰
- å¯é€‰ï¼špsutilç”¨äºå¢å¼ºç³»ç»Ÿç›‘æ§

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/4ier/retire-cluster.git
cd retire-cluster

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æˆ–ä½œä¸ºåŒ…å®‰è£…
pip install .
```

### å¯åŠ¨ä¸»èŠ‚ç‚¹

```bash
# ä½¿ç”¨ç®€å•ç¤ºä¾‹æœåŠ¡å™¨
python examples/simple_main_server.py

# æˆ–ä½¿ç”¨åŒ…
python -m retire_cluster.main_node --host 0.0.0.0 --port 8080
```

### å¯åŠ¨å·¥ä½œèŠ‚ç‚¹

```bash
# ä½¿ç”¨ç®€å•ç¤ºä¾‹å®¢æˆ·ç«¯
python examples/simple_worker_client.py --device-id worker-001 --main-host <ä¸»èŠ‚ç‚¹IP>

# æˆ–ä½¿ç”¨åŒ…
python -m retire_cluster.worker_node --device-id worker-001 --main-host <ä¸»èŠ‚ç‚¹IP>
```

### æµ‹è¯•è¿æ¥

```bash
# æµ‹è¯•å·¥ä½œèŠ‚ç‚¹åˆ°ä¸»èŠ‚ç‚¹çš„è¿æ¥
python examples/simple_worker_client.py --device-id test-001 --test --main-host <ä¸»èŠ‚ç‚¹IP>
```

## ğŸ“– ä½¿ç”¨æ–‡æ¡£

### åŸºç¡€ç”¨æ³•

```python
# å¯åŠ¨ä¸»èŠ‚ç‚¹æœåŠ¡å™¨
from retire_cluster.communication.server import ClusterServer
from retire_cluster.core.config import Config

config = Config()
server = ClusterServer(config)
server.start()
```

```python
# å¯åŠ¨å·¥ä½œèŠ‚ç‚¹å®¢æˆ·ç«¯
from retire_cluster.communication.client import ClusterClient
from retire_cluster.core.config import WorkerConfig

config = WorkerConfig()
config.device_id = "worker-001"
config.main_host = "192.168.1.100"

client = ClusterClient(config)
client.run()
```

### é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äº `configs/` ç›®å½•ï¼š

- `main_config_example.json`: ä¸»èŠ‚ç‚¹é…ç½®æ¨¡æ¿
- `worker_config_example.json`: å·¥ä½œèŠ‚ç‚¹é…ç½®æ¨¡æ¿

### å¹³å°ç‰¹å®šè®¾ç½®

#### Android (Termux)

```bash
# ä»F-Droidæˆ–Google Playå®‰è£…Termux
# åœ¨Termuxä¸­ï¼š
pkg update
pkg install python
pip install psutil

# è¿è¡Œå·¥ä½œèŠ‚ç‚¹
python simple_worker_client.py --device-id android-001 --role mobile --main-host <ä¸»èŠ‚ç‚¹IP>
```

#### æ ‘è“æ´¾ / ARMè®¾å¤‡

```bash
# å¦‚æœæ²¡æœ‰Pythonï¼Œå…ˆå®‰è£…
sudo apt-get update
sudo apt-get install python3 python3-pip

# è¿è¡Œå·¥ä½œèŠ‚ç‚¹
python3 simple_worker_client.py --device-id rpi-001 --role compute --main-host <ä¸»èŠ‚ç‚¹IP>
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰è®¾å¤‡è§’è‰²

ä¸ºç‰¹æ®Šè®¾å¤‡å®šä¹‰è‡ªå®šä¹‰è§’è‰²ï¼š

```python
# åœ¨å·¥ä½œèŠ‚ç‚¹é…ç½®ä¸­
config.role = "gpu-compute"  # GPUè®¾å¤‡
config.role = "storage"      # NASæˆ–å­˜å‚¨æœåŠ¡å™¨
config.role = "mobile"       # ç§»åŠ¨è®¾å¤‡
```

### è®¾å¤‡èƒ½åŠ›

ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹è®¾å¤‡èƒ½åŠ›ï¼š

- **è®¡ç®—èƒ½åŠ›**: CPUæ ¸å¿ƒæ•°ã€GPUå¯ç”¨æ€§
- **å­˜å‚¨èƒ½åŠ›**: å¯ç”¨ç£ç›˜ç©ºé—´
- **æœåŠ¡èƒ½åŠ›**: ç½‘ç»œæœåŠ¡ã€è‡ªåŠ¨åŒ–èƒ½åŠ›

### ç›‘æ§ä¸ç®¡ç†

å®æ—¶ç›‘æ§é›†ç¾¤çŠ¶æ€ï¼š

```python
# è·å–é›†ç¾¤ç»Ÿè®¡ä¿¡æ¯
stats = registry.get_cluster_stats()
print(f"åœ¨çº¿è®¾å¤‡: {stats['online_devices']}")
print(f"æ€»èµ„æº: {stats['total_resources']}")
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯¦æƒ…è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md)ã€‚

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ—ºï¸ å‘å±•è·¯çº¿å›¾

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- [x] åŸºç¡€è®¾å¤‡ç®¡ç†
- [x] TCP socketé€šä¿¡
- [x] å¿ƒè·³ç›‘æ§
- [x] è·¨å¹³å°æ”¯æŒ

### v1.1.0 (è®¡åˆ’ä¸­)
- [ ] ä»»åŠ¡æ‰§è¡Œæ¡†æ¶
- [ ] Webç®¡ç†ç•Œé¢
- [ ] REST API
- [ ] Dockeræ”¯æŒ

### v2.0.0 (æœªæ¥)
- [ ] åˆ†å¸ƒå¼å­˜å‚¨
- [ ] è´Ÿè½½å‡è¡¡
- [ ] å¤šé›†ç¾¤æ”¯æŒ
- [ ] äº‘ç«¯é›†æˆ

---

**è®©ä½ çš„é—²ç½®è®¾å¤‡é‡è·æ–°ç”Ÿï¼ğŸš€**